# =============================================================================
# SOMLENG CPAAS PRODUCTION DEPLOYMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and update the values for your deployment

# =============================================================================
# DOMAIN AND NETWORK CONFIGURATION
# =============================================================================
SOMLENG_DOMAIN=yourdomain.com
PUBLIC_IP=YOUR_PUBLIC_IP_ADDRESS
INTERNAL_IP=172.20.0.1

# =============================================================================
# SOMLENG WEB/API CONFIGURATION
# =============================================================================
RAILS_ENV=production
SECRET_KEY_BASE=GENERATE_WITH_rails_secret_COMMAND
DATABASE_URL=postgresql://somleng:somleng_secure_password_2024@db:5432/somleng_production
REDIS_URL=redis://redis:6379/0

# Admin user credentials
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=StrongAdminPassword123!

# API Configuration
SOMLENG_API_URL=https://yourdomain.com
SOMLENG_API_USERNAME=admin
SOMLENG_API_PASSWORD=StrongAdminPassword123!

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_USER=somleng
POSTGRES_PASSWORD=somleng_secure_password_2024
POSTGRES_DB=somleng_production

# =============================================================================
# FREESWITCH CONFIGURATION
# =============================================================================
# External IPs for RTP/SIP (set to your public IP)
EXT_RTP_IP=YOUR_PUBLIC_IP_ADDRESS
EXT_SIP_IP=YOUR_PUBLIC_IP_ADDRESS

# RTP port range for media
RTP_START_PORT=16384
RTP_END_PORT=32768

# FreeSWITCH Event Socket Password
FS_EVENT_SOCKET_PASSWORD=ClueCon_secure_2024

# =============================================================================
# KAMAILIO SIP ROUTER CONFIGURATION
# =============================================================================
KAMAILIO_SIP_PORT=5060
KAMAILIO_TLS_PORT=5061
KAMAILIO_DB_URL=postgresql://kamailio:kamailio_secure_password_2024@db:5432/kamailio

# SIP Authentication
SIP_DOMAIN=yourdomain.com
SIP_REALM=yourdomain.com

# =============================================================================
# RTPENGINE CONFIGURATION
# =============================================================================
RTPENGINE_LISTEN_IP=0.0.0.0
RTPENGINE_PUBLIC_IP=YOUR_PUBLIC_IP_ADDRESS
RTPENGINE_PORT_MIN=20000
RTPENGINE_PORT_MAX=30000

# =============================================================================
# SMS GATEWAY CONFIGURATION
# =============================================================================
SMS_GATEWAY_MODE=production
SMS_GATEWAY_API_KEY=your_sms_gateway_api_key_here

# SMPP Configuration (if using SMPP)
SMPP_HOST=your_smpp_provider_host
SMPP_PORT=2775
SMPP_USERNAME=your_smpp_username
SMPP_PASSWORD=your_smpp_password

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_TIME=15d

# Grafana
GRAFANA_PORT=3001
GRAFANA_ADMIN_PASSWORD=GrafanaSecure123!

# ELK Stack
ELASTIC_PASSWORD=ElasticSecure123!
KIBANA_PORT=5601
ELASTICSEARCH_PORT=9200

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
# Let's Encrypt email for SSL certificates
LETSENCRYPT_EMAIL=admin@yourdomain.com

# SSL certificate paths (will be auto-generated by Let's Encrypt)
SSL_CERT_PATH=/etc/nginx/ssl/fullchain.pem
SSL_KEY_PATH=/etc/nginx/ssl/privkey.pem

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT Secret for API authentication
JWT_SECRET=your_jwt_secret_key_here_make_it_long_and_secure

# Rate limiting
RATE_LIMIT_CALLS_PER_MINUTE=100
RATE_LIMIT_SMS_PER_MINUTE=50

# Fraud protection
MAX_CALL_DURATION_MINUTES=120
MAX_CONCURRENT_CALLS_PER_ACCOUNT=50

# =============================================================================
# SCALING CONFIGURATION
# =============================================================================
# Number of FreeSWITCH nodes to deploy
FREESWITCH_NODES=2

# Sidekiq workers
SIDEKIQ_CONCURRENCY=10

# Database connection pool
DB_POOL_SIZE=20

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
# S3 or compatible storage for backups
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_ACCESS_KEY=your_s3_access_key
BACKUP_S3_SECRET_KEY=your_s3_secret_key
BACKUP_S3_REGION=us-east-1

# Backup schedule (cron format)
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_LEVEL=info
SYSLOG_ENABLED=true
SYSLOG_HOST=localhost
SYSLOG_PORT=514

# =============================================================================
# CARRIER/TRUNK CONFIGURATION
# =============================================================================
# SIP trunk configuration for voice termination
SIP_TRUNK_HOST=your_carrier_sip_host
SIP_TRUNK_USERNAME=your_trunk_username
SIP_TRUNK_PASSWORD=your_trunk_password
SIP_TRUNK_PORT=5060

# =============================================================================
# DEVELOPMENT/TESTING FLAGS
# =============================================================================
# Set to true for development, false for production
DEBUG_MODE=false
ENABLE_SWAGGER_UI=false
ENABLE_METRICS_ENDPOINT=true

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================
# Docker network subnet
DOCKER_SUBNET=172.20.0.0/16

# Container restart policy
RESTART_POLICY=unless-stopped

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# PostgreSQL performance settings
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_WORK_MEM=4MB

# Redis performance settings
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# NGINX worker processes (set to number of CPU cores)
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=1024